<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">

<head th:include="fragments/fragments :: source-includes">
	<div th:replace="fragments/fragments :: header"> </div>

	<title>Produtos</title>

	<script th:inline="javascript">
		/*<![CDATA[*/
		var produtos = /*[[${produtos}]]*/ 'produtos';
		/*]]>*/
		$(document).ready(function () {
			var table = $('#Produtotable').DataTable({
				"data": produto,
				"sAjaxDataProp": "",
				"oLanguage": oLanguage,
				"pageLength": 50,
				"aoColumns": [
					{ "mData": "id" },
					{ "mData": "name" },
					{ "mData": "size" },
					{ "mData": "price" },
					// {
					// 	"mRender": function (data, type, full) {
					// 		return '<img style="max-height:50px;max-width:50px;" src="/images/repo/' + full["drawablePath"] + '" alt="Sem imagem" />';
					// 	}, "orderable": false
					// },
					{
						"mRender": function (data, type, full) {
							return '<a class="btn btn-outline-warning btn-sm" type="button" href="/alterproduto?id=' + full["id"] + '">Alterar</a>';
						}, "orderable": false
					},
					{
						"mRender": function (data, type, full) {
							return '<a class="btn btn-outline-danger btn-sm" type="button" href="/deleteproduto?id=' + full["id"] + '">Excluir</button>';
						}, "orderable": false
					}
				]
			});
		});
	</script>

</head>

<body>

	<td th:switch="${status}">

		<span th:case="deleted">

			<div id="moo"
				class="alert alert-success alert-dismissible show fade"
				role="alert" auto-close="4000">
				<button type="button" class="close" data-dismiss="alert"
					aria-label="Close"><span aria-hidden="true">&times;</span>
				</button>
				Produto deletada com sucesso!
			</div>

		</span>

		<span th:case="altered">

			<div id="moo"
				class="alert alert-success alert-dismissible show fade"
				role="alert" auto-close="4000">
				<button type="button" class="close" data-dismiss="alert"
					aria-label="Close"><span aria-hidden="true">&times;</span>
				</button>
				Produto alterada com sucesso!
			</div>

		</span>

		<span th:case="created">

			<div id="moo"
				class="alert alert-success alert-dismissible show fade"
				role="alert" auto-close="4000">
				<button type="button" class="close" data-dismiss="alert"
					aria-label="Close"><span aria-hidden="true">&times;</span>
				</button>
				Produto criada com sucesso!
			</div>

		</span>

		<span th:case="notfound">

			<div id="moo" class="alert alert-danger alert-dismissible show fade"
				role="alert" auto-close="4000">
				<button type="button" class="close" data-dismiss="alert"
					aria-label="Close"><span aria-hidden="true">&times;</span>
				</button>
				Produto não encontrada
			</div>

		</span>

		<span th:case="order_already_exists">

			<div id="moo" class="alert alert-danger alert-dismissible show fade"
				role="alert" auto-close="4000">
				<button type="button" class="close" data-dismiss="alert"
					aria-label="Close"><span aria-hidden="true">&times;</span>
				</button>
				O Produto não pôde ser criada/editada pois já há outra produto
				com mesma ordem, por favor, escolha uma ordem distinta.
			</div>

		</span>

	</td>

	<div class="pb-2 mt-4 mb-4 border-bottom title">
		<label class="lb-lg">
			<h2>Produtos</h2>
		</label>
		<button class="btn btn-primary float-right btn-sm button-new"
			onclick="location.href='alterproduto';">Criar
			novo produto</button>
	</div>

	<div class="d-flex justify-content-center">

		<table 
			class="table table-striped table-bordered table-hover table-sm table-fit text-center align-middle"
			id="produtotable">
			<caption>Tabela de produtos</caption>
			<thead>
				<tr>
					<th scope="col">#</th>
					<th scope="col">Produto</th>
					<th scope="col">Tamanho</th>
					<th scope="col">preco</th>
					<th scope="col"></th>
					<th scope="col"></th>
				</tr>
			</thead>
		</table>
	</div>
</body>

<div th:replace="fragments/fragments :: footer"> </div>

</html>